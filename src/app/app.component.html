<header class="header">
    <a [routerLink]="'/'" class="header__title">
        <h1>Автоматизированная система по организации мероприятий профкомом ИРНИТУ</h1>
    </a>
    <div class="user" (click)="onUserClick()">

        <button pButton type="button" [label]="authedUser!.name" class="p-button-text"
            *ngIf="isLogged; else login"></button>
        <ng-template #login>
            <p-button label="Войти или зарегестрироваться" p-tooltip="Заполните все поля"></p-button>
        </ng-template>
    </div>
</header>
<p-sidebar [(visible)]="display" position="right">
    <div *ngIf="isLogged; else loginForm" class="menu">
        <div *ngIf="authedUser?.role === 'admin'; else studentMenu">
            <div class="menu__title">
                Администратор
            </div>
            <a [routerLink]="'/personal-cabinet'" pButton type="button" label="Личный кабинет"
                class="p-button-text menu__item">
            </a>
            <a [routerLink]="'/events'" pButton type="button" label="Мероприятия" class="p-button-text menu__item">
            </a>
            <a [routerLink]="'/event-reviews'" pButton type="button" label="Отзывы" class="p-button-text menu__item">
            </a>
            <a [routerLink]="'/event-tags'" pButton type="button" label="Теги мероприятий"
                class="p-button-text menu__item">
            </a>
            <a [routerLink]="'/auditories'" pButton type="button" label="Аудитории" class="p-button-text menu__item">
            </a>
            <a [routerLink]="'/groups'" pButton type="button" label="Группы" class="p-button-text menu__item">
            </a>
            <a [routerLink]="'/users'" pButton type="button" label="Пользователи" class="p-button-text menu__item">
            </a>
        </div>
        <ng-template #studentMenu>
            <div class="menu__title">
                {{authedUser!.name}}
            </div>

        </ng-template>

        <button pButton type="button" label="Выйти" (click)="unauthorize()" class="menu__item"></button>
    </div>
    <ng-template #loginForm>
        <h1 class="login-form__title">Войдите в личный кабинет или зарегестрируйтесь</h1>
        <p-tabView>
            <p-tabPanel header="Вход">
                <form [formGroup]="signInForm" novalidate (ngSubmit)="onSubmitSignIn()" class="form">
                    <span class="p-field p-fluid">
                        <label for="signInLogin"
                            [class.form__error-msg]="signInForm.controls.signInLogin.invalid && signInForm.controls.signInLogin.touched">Логин</label>
                        <input id="signInLogin" [class.ng-dirty]="signInForm.controls.signInLogin.touched"
                            [class.ng-invalid]="
                        signInForm.controls.signInLogin.invalid" name="signInLogin" formControlName="signInLogin"
                            type="text" pInputText>
                        <small
                            *ngIf="signInForm.controls.signInLogin.invalid && signInForm.controls.signInLogin.touched"
                            id="signInLogin" class="form__error-msg">Введите логин</small>
                    </span>
                    <span class="p-field p-fluid">
                        <label for="signInPassword"
                            [class.form__error-msg]="signInForm.controls.signInPassword.invalid && signInForm.controls.signInPassword.touched">Пароль</label>
                        <input p-tooltip="Заполните все поля" tooltipEvent="focus" id="signInPassword"
                            [class.ng-dirty]="signInForm.controls.signInPassword.touched" [class.ng-invalid]="
                        signInForm.controls.signInPassword.invalid" name="signInPassword"
                            formControlName="signInPassword" type="password" pInputText />
                        <small
                            *ngIf="signInForm.controls.signInPassword.invalid && signInForm.controls.signInPassword.touched"
                            id="signInLogin" class="form__error-msg">Введите пароль</small>
                    </span>
                    <p-button type="submit" label="Войти" p-tooltip="Заполните все поля" tooltipEvent="hover"
                        [disabled]="signInForm.invalid && signInForm.touched">
                    </p-button>
                    <small *ngIf="loginStatus ==='error'" id="signInLogin" class="form__error-msg">Неправильный логин
                        или пароль</small>
                </form>
            </p-tabPanel>
            <p-tabPanel header="Регистрация">
                <form [formGroup]="signUpForm" novalidate (ngSubmit)="onSubmitSignUp()" class="form">
                    <span class="p-field p-fluid">
                        <label for="userGroupControl"
                            [class.form__error-msg]="signUpForm.controls.userGroupControl.invalid && signUpForm.controls.userGroupControl.touched">Группа
                            студента</label>
                        <p-dropdown id="userGroupControl" name="userGroupControl" [options]="groups"
                            formControlName="userGroupControl" optionLabel="name"
                            [class.ng-dirty]="signUpForm.controls.userGroupControl.touched" [class.ng-invalid]="
                        signUpForm.controls.userGroupControl.invalid"></p-dropdown>
                        <small
                            *ngIf="signUpForm.controls.userGroupControl.invalid && signUpForm.controls.userGroupControl.touched"
                            id="signInLogin" class="form__error-msg">Выбирите группу</small>
                    </span>
                    <span class="p-field p-fluid">
                        <label for="signUpLogin"
                            [class.form__error-msg]="signUpForm.controls.signUpLogin.invalid && signUpForm.controls.signUpLogin.touched">Логин</label>
                        <input id="signUpLogin" name="signUpLogin" formControlName="signUpLogin" type="text" pInputText
                            [class.ng-dirty]="signUpForm.controls.signUpLogin.touched" [class.ng-invalid]="
                        signUpForm.controls.signUpLogin.invalid">
                        <small
                            *ngIf="signUpForm.controls.signUpLogin.invalid && signUpForm.controls.signUpLogin.touched"
                            id="signInLogin" class="form__error-msg">Введите логин</small>
                    </span>
                    <span class="p-field p-fluid">
                        <label for="signUpName"
                            [class.form__error-msg]="signUpForm.controls.signUpName.invalid && signUpForm.controls.signUpName.touched">Имя</label>
                        <input id="signUpName" name="signUpName" formControlName="signUpName" type="text" pInputText
                            [class.ng-dirty]="signUpForm.controls.signUpName.touched" [class.ng-invalid]="
                        signUpForm.controls.signUpName.invalid">
                        <small *ngIf="signUpForm.controls.signUpName.invalid && signUpForm.controls.signUpName.touched"
                            id="signInLogin" class="form__error-msg">Введите имя</small>
                    </span>
                    <span class="p-field p-fluid">
                        <label for="signUpEmail"
                            [class.form__error-msg]="signUpForm.controls.signUpEmail.invalid && signUpForm.controls.signUpEmail.touched">эл.
                            почта</label>
                        <input id="signUpEmail" name="signUpEmail" formControlName="signUpEmail" type="text" pInputText
                            [class.ng-dirty]="signUpForm.controls.signUpEmail.touched" [class.ng-invalid]="
                        signUpForm.controls.signUpEmail.invalid">
                        <small
                            *ngIf="signUpForm.controls.signUpEmail.invalid && signUpForm.controls.signUpEmail.touched"
                            id="signInLogin" class="form__error-msg">Введите электронную почту</small>
                    </span>
                    <span class="p-field p-fluid">
                        <label
                            [class.form__error-msg]="signUpForm.controls.signUpPassword.invalid && signUpForm.controls.signUpPassword.touched"
                            for="signUpPassword">Пароль</label>
                        <p-password id="signUpPassword" [class.ng-dirty]="signUpForm.controls.signUpPassword.touched"
                            [class.ng-invalid]="
                            signUpForm.controls.signUpPassword.invalid" name=" signUpPassword"
                            formControlName="signUpPassword">
                        </p-password>
                        <small
                            *ngIf="signUpForm.controls.signUpPassword.invalid && signUpForm.controls.signUpPassword.touched"
                            id="signInLogin" class="form__error-msg">Введите пароль</small>
                    </span>
                    <p-button type="submit" label="Зарегестрироваться"
                        [disabled]="signUpForm.invalid && signUpForm.touched"></p-button>

                </form>
            </p-tabPanel>
        </p-tabView>
    </ng-template>

</p-sidebar>
<router-outlet></router-outlet>